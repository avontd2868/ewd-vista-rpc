var vistaRPC = require('ewd-vista-rpc');

module.exports = {
  onMessage: {

    login: function(params, ewd) {
      if (!params.accessCode || params.accessCode === '') return {error: 'You must enter an Access Code'};
      if (!params.verifyCode || params.verifyCode === '') return {error: 'You must enter a Verify Code'};
      return vistaRPC.onMessage.login(params, ewd);
    },

    rpcTest: function(params, ewd) {
      var args = {
        rpcName: 'XWB EGCHO STRING',
        rpcArgs: [{
          type: 'LITERAL',
          value: 'This is a test!'
        }],
      };
      return vistaRPC.onMessage.runRPC(args, ewd);
    }
  },

  services: function() {
    return ['ewd-vista-rpc'];
  }

};